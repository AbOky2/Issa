{"ast":null,"code":"import _regeneratorRuntime from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/usr/src/kit-le-nid/pages/dashboard/search.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from 'next/link';\nimport { Grid, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport withAuth from '../../lib/withAuth';\nimport { getPropertiesApiMethod, addBookmarkApiMethod, getUserSearchApiMethod } from '../../lib/api/customer';\nimport { toggleArray } from '../../helpers/convertAndCheck';\nimport { typeOfProperties } from '../../helpers/property';\nimport { AdminContentWrapper } from '../../components/wrapper';\nimport Card from '../../components/card';\nimport { Icon, Input, Select } from '../../components/form';\nvar useStyles = makeStyles({\n  card: {\n    width: 'calc(100% - 14px)'\n  },\n  title: {\n    color: '#4F80FF'\n  },\n  subTitle: {\n    margin: '4px 0 22px',\n    color: 'rgba(26, 46, 108, 0.75)'\n  },\n  setpsContainer: {\n    marginBottom: '40px',\n    padding: '3.2rem',\n    borderRadius: '2.5rem',\n    color: 'white',\n    background: 'white',\n    boxShadow: '0px 4px 13px rgb(0 0 0 / 10%), inset 0px -3px 10px rgb(149 149 149 / 20%)',\n    '& li': {\n      marginBottom: 15\n    },\n    '& span': {\n      padding: '0 5px',\n      color: 'white',\n      marginRight: 10,\n      background: '#4F80FF',\n      borderRadius: '3px'\n    }\n  },\n  searchContainer: {\n    marginBottom: 22,\n    boxShadow: '0px 4.15441px 16.6176px rgb(0 0 0 / 10%)',\n    '& > div:last-of-type svg': {\n      position: 'absolute',\n      right: 0,\n      top: '50%',\n      width: 40,\n      height: 40,\n      transform: 'translateY(-50%)'\n    },\n    '& > div:nth-child(2) > div > div > div': {\n      backgroundColor: 'white',\n      borderRadius: 0\n    },\n    '& > div:first-of-type input': {\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      borderRight: 'none'\n    },\n    '& > div:last-of-type input': {\n      borderLeft: 'none',\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0\n    }\n  },\n  listContainer: {\n    width: 'calc(33% - 11px)',\n    marginBottom: '2rem',\n    '&:nth-child(3n+2)': {\n      margin: '0 2.1rem 2rem'\n    }\n  }\n});\n\nvar SearchPage = function SearchPage(_ref) {\n  _s();\n\n  var _user$bookmarks;\n\n  var user = _ref.user,\n      properties = _ref.properties,\n      queryType = _ref.queryType;\n\n  var _useState = useState(properties),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState({\n    location: '',\n    maxPrice: 0,\n    typeOfProperty: typeOfProperties[0]\n  }),\n      queryData = _useState2[0],\n      setQueryData = _useState2[1];\n\n  var _useState3 = useState(user === null || user === void 0 ? void 0 : (_user$bookmarks = user.bookmarks) === null || _user$bookmarks === void 0 ? void 0 : _user$bookmarks.map(function (elem) {\n    return elem._id;\n  })),\n      liked = _useState3[0],\n      setLiked = _useState3[1];\n\n  var classes = useStyles();\n\n  var handleSearch = function handleSearch(name) {\n    return function (_ref2) {\n      var value = _ref2.target.value;\n      return setQueryData(_objectSpread(_objectSpread({}, queryData), {}, _defineProperty({}, name, value)));\n    };\n  };\n\n  var handleBookmark = function handleBookmark(id) {\n    setLiked(toggleArray(liked, id));\n    addBookmarkApiMethod({\n      id: id\n    });\n  };\n\n  var handleSumit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$getUserSearchA, list;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // const queryData = { maxPrice: '20000', typeOfProperty: 'Appartement' };\n              if (!queryData.maxPrice) queryData.maxPrice = 0;\n              _context.next = 3;\n              return getUserSearchApiMethod(queryData);\n\n            case 3:\n              _yield$getUserSearchA = _context.sent;\n              list = _yield$getUserSearchA.list;\n              setState(list);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSumit() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(AdminContentWrapper, {\n    redirectDashboard: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, queryType !== 'location' && __jsx(\"div\", {\n    className: classes.setpsContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, __jsx(Typography, {\n    variant: \"h2\",\n    className: classes.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \"Mon premier achat en 5 \\xE9tapes !\"), __jsx(Typography, {\n    variant: \"body1\",\n    className: classes.subTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, \"Comment \\xE7a marche?\"), __jsx(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, \"1\"), \"Je s\\xE9lectionne l'appartement qui me convient avec l'aide d'un conseiller Kit Le Nid\")), __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, \"2\"), \"J'effectue la r\\xE9servation du bien, qui est bloqu\\xE9 pour moi\")), __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 19\n    }\n  }, \"3\"), \"J'effectue les d\\xE9marches de pr\\xEAt immobilier ou la confie \\xE0 Kit Le Nid\")), __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, \"4\"), \"Je signe chez le notaire et devient officiellement propri\\xE9taire\")), __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, \"5\"), \"J'attends la livraison du bien et emm\\xE9nage!\")))), __jsx(Grid, {\n    container: true,\n    className: classes.searchContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    item: true,\n    md: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    name: \"location\",\n    onChange: handleSearch,\n    placeholder: \"Localisation\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  })), __jsx(Grid, {\n    item: true,\n    md: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, __jsx(Select, {\n    name: \"typeOfProperty\",\n    list: typeOfProperties.map(function (name) {\n      return {\n        name: name,\n        value: name\n      };\n    }),\n    onChange: handleSearch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  })), __jsx(Grid, {\n    item: true,\n    md: 4,\n    className: \"relative\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    name: \"maxPrice\",\n    onChange: handleSearch,\n    placeholder: \"Budget maximal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    onClick: handleSumit,\n    className: \"pointer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, __jsx(Icon, {\n    type: \"search\",\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  })))), __jsx(Grid, {\n    container: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, state === null || state === void 0 ? void 0 : state.map(function (_ref4) {\n    var _id = _ref4._id,\n        title = _ref4.title,\n        pictures = _ref4.pictures,\n        address = _ref4.address,\n        typeOfProperty = _ref4.typeOfProperty,\n        dimensions = _ref4.dimensions,\n        price = _ref4.price;\n    return __jsx(Grid, {\n      item: true,\n      key: _id,\n      className: classes.listContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, __jsx(Link, {\n      href: \"/dashboard/property/\".concat(_id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, __jsx(Card, {\n      _id: _id,\n      title: title,\n      src: pictures === null || pictures === void 0 ? void 0 : pictures[0],\n      address: address,\n      description: typeOfProperty,\n      dimensions: dimensions,\n      price: price,\n      liked: liked.includes(_id),\n      onClick: handleBookmark,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }))));\n  }))));\n};\n\n_s(SearchPage, \"WKrbbHzqO7cjD5CwsILTzOOag3E=\", false, function () {\n  return [useStyles];\n});\n\n_c = SearchPage;\n\nSearchPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref5) {\n    var req, query, headers, queryType, _yield$getPropertiesA, list;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            req = _ref5.req, query = _ref5.query;\n            headers = {};\n\n            if (req && req.headers && req.headers.cookie) {\n              headers.cookie = req.headers.cookie;\n            }\n\n            queryType = query.type;\n            _context2.next = 6;\n            return getPropertiesApiMethod({\n              headers: headers\n            });\n\n          case 6:\n            _yield$getPropertiesA = _context2.sent;\n            list = _yield$getPropertiesA.list;\n            return _context2.abrupt(\"return\", {\n              properties: list,\n              queryType: queryType\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nexport default _c2 = withAuth(SearchPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SearchPage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/usr/src/kit-le-nid/pages/dashboard/search.js"],"names":["React","useState","PropTypes","Link","Grid","Typography","makeStyles","withAuth","getPropertiesApiMethod","addBookmarkApiMethod","getUserSearchApiMethod","toggleArray","typeOfProperties","AdminContentWrapper","Card","Icon","Input","Select","useStyles","card","width","title","color","subTitle","margin","setpsContainer","marginBottom","padding","borderRadius","background","boxShadow","marginRight","searchContainer","position","right","top","height","transform","backgroundColor","borderTopRightRadius","borderBottomRightRadius","borderRight","borderLeft","borderTopLeftRadius","borderBottomLeftRadius","listContainer","SearchPage","user","properties","queryType","state","setState","location","maxPrice","typeOfProperty","queryData","setQueryData","bookmarks","map","elem","_id","liked","setLiked","classes","handleSearch","name","value","target","handleBookmark","id","handleSumit","list","pictures","address","dimensions","price","includes","getInitialProps","req","query","headers","cookie","type"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from 'next/link';\nimport { Grid, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport withAuth from '../../lib/withAuth';\nimport {\n  getPropertiesApiMethod,\n  addBookmarkApiMethod,\n  getUserSearchApiMethod,\n} from '../../lib/api/customer';\nimport { toggleArray } from '../../helpers/convertAndCheck';\nimport { typeOfProperties } from '../../helpers/property';\nimport { AdminContentWrapper } from '../../components/wrapper';\nimport Card from '../../components/card';\nimport { Icon, Input, Select } from '../../components/form';\n\nconst useStyles = makeStyles({\n  card: {\n    width: 'calc(100% - 14px)',\n  },\n  title: {\n    color: '#4F80FF',\n  },\n  subTitle: {\n    margin: '4px 0 22px',\n    color: 'rgba(26, 46, 108, 0.75)',\n  },\n  setpsContainer: {\n    marginBottom: '40px',\n    padding: '3.2rem',\n    borderRadius: '2.5rem',\n    color: 'white',\n    background: 'white',\n    boxShadow: '0px 4px 13px rgb(0 0 0 / 10%), inset 0px -3px 10px rgb(149 149 149 / 20%)',\n    '& li': {\n      marginBottom: 15,\n    },\n    '& span': {\n      padding: '0 5px',\n      color: 'white',\n      marginRight: 10,\n      background: '#4F80FF',\n      borderRadius: '3px',\n    },\n  },\n  searchContainer: {\n    marginBottom: 22,\n    boxShadow: '0px 4.15441px 16.6176px rgb(0 0 0 / 10%)',\n    '& > div:last-of-type svg': {\n      position: 'absolute',\n      right: 0,\n      top: '50%',\n      width: 40,\n      height: 40,\n      transform: 'translateY(-50%)',\n    },\n    '& > div:nth-child(2) > div > div > div': {\n      backgroundColor: 'white',\n      borderRadius: 0,\n    },\n    '& > div:first-of-type input': {\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      borderRight: 'none',\n    },\n    '& > div:last-of-type input': {\n      borderLeft: 'none',\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0,\n    },\n  },\n  listContainer: {\n    width: 'calc(33% - 11px)',\n    marginBottom: '2rem',\n    '&:nth-child(3n+2)': {\n      margin: '0 2.1rem 2rem',\n    },\n  },\n});\nconst SearchPage = ({ user, properties, queryType }) => {\n  const [state, setState] = useState(properties);\n  const [queryData, setQueryData] = useState({\n    location: '',\n    maxPrice: 0,\n    typeOfProperty: typeOfProperties[0],\n  });\n  const [liked, setLiked] = useState(user?.bookmarks?.map((elem) => elem._id));\n  const classes = useStyles();\n  const handleSearch = (name) => ({ target: { value } }) =>\n    setQueryData({ ...queryData, [name]: value });\n\n  const handleBookmark = (id) => {\n    setLiked(toggleArray(liked, id));\n    addBookmarkApiMethod({ id });\n  };\n  const handleSumit = async () => {\n    // const queryData = { maxPrice: '20000', typeOfProperty: 'Appartement' };\n    if (!queryData.maxPrice) queryData.maxPrice = 0;\n    const { list } = await getUserSearchApiMethod(queryData);\n    setState(list);\n  };\n\n  return (\n    <AdminContentWrapper redirectDashboard>\n      <div>\n        {queryType !== 'location' && (\n          <div className={classes.setpsContainer}>\n            <Typography variant=\"h2\" className={classes.title}>\n              Mon premier achat en 5 étapes !\n            </Typography>\n            <Typography variant=\"body1\" className={classes.subTitle}>\n              Comment ça marche?\n            </Typography>\n            <ul>\n              <li>\n                <Typography variant=\"body1\">\n                  <span>1</span>\n                  Je sélectionne l'appartement qui me convient avec l'aide d'un conseiller Kit Le\n                  Nid\n                </Typography>\n              </li>\n              <li>\n                <Typography variant=\"body1\">\n                  <span>2</span>\n                  J'effectue la réservation du bien, qui est bloqué pour moi\n                </Typography>\n              </li>\n              <li>\n                <Typography variant=\"body1\">\n                  <span>3</span>\n                  J'effectue les démarches de prêt immobilier ou la confie à Kit Le Nid\n                </Typography>\n              </li>\n              <li>\n                <Typography variant=\"body1\">\n                  <span>4</span>\n                  Je signe chez le notaire et devient officiellement propriétaire\n                </Typography>\n              </li>\n              <li>\n                <Typography variant=\"body1\">\n                  <span>5</span>\n                  J'attends la livraison du bien et emménage!\n                </Typography>\n              </li>\n            </ul>\n          </div>\n        )}\n        <Grid container className={classes.searchContainer}>\n          <Grid item md={4}>\n            <Input name=\"location\" onChange={handleSearch} placeholder=\"Localisation\" />\n          </Grid>\n          <Grid item md={4}>\n            <Select\n              name=\"typeOfProperty\"\n              list={typeOfProperties.map((name) => ({ name, value: name }))}\n              onChange={handleSearch}\n            />\n          </Grid>\n          <Grid item md={4} className=\"relative\">\n            <Input name=\"maxPrice\" onChange={handleSearch} placeholder=\"Budget maximal\" />\n            <div onClick={handleSumit} className=\"pointer\">\n              <Icon type=\"search\" size=\"large\" />\n            </div>\n          </Grid>\n        </Grid>\n        <Grid container>\n          {state?.map(({ _id, title, pictures, address, typeOfProperty, dimensions, price }) => (\n            <Grid item key={_id} className={classes.listContainer}>\n              <Link href={`/dashboard/property/${_id}`}>\n                <a>\n                  <Card\n                    _id={_id}\n                    title={title}\n                    src={pictures?.[0]}\n                    address={address}\n                    description={typeOfProperty}\n                    dimensions={dimensions}\n                    price={price}\n                    liked={liked.includes(_id)}\n                    onClick={handleBookmark}\n                  />\n                </a>\n              </Link>\n            </Grid>\n          ))}\n        </Grid>\n      </div>\n    </AdminContentWrapper>\n  );\n};\n\nSearchPage.getInitialProps = async ({ req, query }) => {\n  const headers = {};\n  if (req && req.headers && req.headers.cookie) {\n    headers.cookie = req.headers.cookie;\n  }\n  const queryType = query.type;\n  const { list } = await getPropertiesApiMethod({ headers });\n  return { properties: list, queryType };\n};\n\nexport default withAuth(SearchPage);\n"]},"metadata":{},"sourceType":"module"}