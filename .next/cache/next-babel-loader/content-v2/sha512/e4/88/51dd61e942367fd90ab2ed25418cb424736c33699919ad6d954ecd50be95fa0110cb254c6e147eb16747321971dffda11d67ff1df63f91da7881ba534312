{"ast":null,"code":"import _regeneratorRuntime from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/usr/src/kit-le-nid/pages/admin/partners.js\",\n    _s = $RefreshSig$(),\n    _this = this,\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Grid, Card, CardActionArea, CardActions, CardContent, CardMedia, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AdminContentWrapper } from '../../components/wrapper';\nimport { Modal, Icon } from '../../components/form'; // import { ReactComponent as LotsIcon } from 'assets/img/svg/partners.svg';\n// import { ReactComponent as AddIcon } from 'assets/img/svg/add.svg';\n\nimport { getPartnersApiMethod, deletePartnerApiMethod } from '../../lib/api/admin';\nimport withAuth from '../../lib/withAuth';\nimport { partnerTypeListKeys, partnerTypes } from '../../helpers/partner';\nimport PartnerModal from '../../components/admin/partnerModal';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    media: {\n      height: 140\n    },\n    closeModal: {\n      position: 'absolute',\n      top: 10,\n      right: 10,\n      cursor: 'pointer',\n      padding: 10,\n      zIndex: 10,\n      '&:hover': {\n        backgroundColor: '#bbd0ff',\n        color: 'white'\n      }\n    }\n  };\n});\n\nfunction ListCard(_ref) {\n  _s();\n\n  var data = _ref.data;\n  var classes = useStyles();\n  return __jsx(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, __jsx(CardActionArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, __jsx(CardMedia, {\n    className: classes.media,\n    image: data === null || data === void 0 ? void 0 : data.picture,\n    title: \"Contemplative Reptile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    gutterBottom: true,\n    variant: \"h5\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, data.name), __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, data.description))), __jsx(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, partnerTypes[data.type])));\n}\n\n_s(ListCard, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\n_c = ListCard;\nvar defaultAddNew = {\n  _id: null,\n  picture: null,\n  name: 'aaaa-',\n  description: 'bbbb',\n  link: 'cccc',\n  position: 5\n};\n\nvar Header = function Header(_ref2) {\n  var onClick = _ref2.onClick;\n  return __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    alignItems: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 3\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, __jsx(Grid, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"header-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    type: \"sponsorship\",\n    size: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  })), __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Offres partenaires\"))), __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, __jsx(Grid, {\n    onClick: onClick,\n    className: \"submit pointer partner-add\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"header-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    type: \"plus\",\n    size: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  })), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"Ajouter\"))));\n};\n\n_c2 = Header;\nvar noFilter = null;\n\nvar PartnersDashboard = function PartnersDashboard() {\n  _s2();\n\n  var _useState = useState(noFilter),\n      filter = _useState[0],\n      setFilter = _useState[1];\n\n  var _useState2 = useState([]),\n      partners = _useState2[0],\n      setPartners = _useState2[1];\n\n  var _useState3 = useState({\n    openModal: false,\n    editElement: {}\n  }),\n      state = _useState3[0],\n      setState = _useState3[1];\n\n  var handleChange = useCallback(function (name, value) {\n    return setState(_objectSpread(_objectSpread({}, state), {}, _defineProperty({}, name, value)));\n  }, [state, setState]);\n\n  var toggleState = function toggleState(name) {\n    return handleChange(name, !state[name]);\n  };\n\n  var resetState = useCallback(function () {\n    return setState(_objectSpread(_objectSpread(_objectSpread({}, state), {}, {\n      openModal: false,\n      filter: noFilter\n    }, defaultAddNew), {}, {\n      editElement: {}\n    }));\n  }, [state, setState]);\n\n  var handleClose = function handleClose() {\n    return resetState();\n  };\n\n  var handleActiveFilter = useCallback(function (name) {\n    return setFilter(name);\n  }, [setFilter]);\n\n  var onClick = function onClick() {\n    return toggleState('openModal');\n  };\n\n  var reloadPartners = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _yield$getPartnersApi, list;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return getPartnersApiMethod();\n\n          case 2:\n            _yield$getPartnersApi = _context.sent;\n            list = _yield$getPartnersApi.list;\n            setPartners(list);\n            resetState();\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [resetState, setPartners]);\n\n  var handleEditSelect = function handleEditSelect(id) {\n    setState({\n      openModal: true,\n      editElement: partners.find(function (e) {\n        return e._id === id;\n      })\n    });\n  };\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return deletePartnerApiMethod(id);\n\n            case 2:\n              reloadPartners();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleDelete(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    reloadPartners();\n  }, []);\n  var filteredList = filter ? partners.filter(function (elem) {\n    return elem.type === filter;\n  }) : partners;\n  var classes = useStyles();\n  return __jsx(React.Fragment, null, __jsx(AdminContentWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, __jsx(Modal, {\n    openModal: state.openModal,\n    onClose: handleClose,\n    onClick: onClick,\n    showActions: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    container: true,\n    item: true,\n    xs: 12,\n    justify: \"flex-start\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, __jsx(PartnerModal, {\n    current: state.editElement,\n    handleSubmit: reloadPartners,\n    handleClose: handleClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }))), __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\",\n    alignItems: \"center\",\n    className: \"spacing header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    item: true,\n    container: true,\n    xs: 12,\n    justify: \"flex-start\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    item: true,\n    container: true,\n    alignItems: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, __jsx(Header, {\n    onClick: onClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  })))), __jsx(Grid, {\n    container: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    onClick: function onClick() {\n      return handleActiveFilter(noFilter);\n    },\n    className: \"partner-filter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, \"Tout\"), partnerTypeListKeys.map(function (elem) {\n    return (// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      __jsx(\"div\", {\n        key: elem,\n        onClick: function onClick() {\n          return handleActiveFilter(elem);\n        },\n        className: \"partner-filter \".concat(elem === filter ? 'active' : ''),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 15\n        }\n      }, partnerTypes[elem])\n    );\n  })), __jsx(Grid, {\n    container: true,\n    className: \"partner-card-list-container\",\n    justify: \"space-arround\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, filteredList.map(function (elem) {\n    return __jsx(Grid, {\n      item: true,\n      key: elem._id,\n      alignItems: \"center\",\n      md: 4,\n      onClick: function onClick() {\n        return handleEditSelect(elem._id);\n      },\n      className: \"partner-card-list relative\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      onClick: function onClick(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        handleDelete(elem._id);\n      },\n      className: classes.closeModal,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, \"x\"), __jsx(ListCard, {\n      data: elem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }));\n  })))));\n};\n\n_s2(PartnersDashboard, \"Dt2vZvkzl8G1lUPD7BIj6GD+lso=\", false, function () {\n  return [useStyles];\n});\n\n_c3 = PartnersDashboard;\nexport default _c4 = withAuth(PartnersDashboard, {\n  adminRequired: true\n});\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ListCard\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"PartnersDashboard\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"sources":["/usr/src/kit-le-nid/pages/admin/partners.js"],"names":["React","useState","useCallback","useEffect","Grid","Card","CardActionArea","CardActions","CardContent","CardMedia","Typography","makeStyles","AdminContentWrapper","Modal","Icon","getPartnersApiMethod","deletePartnerApiMethod","withAuth","partnerTypeListKeys","partnerTypes","PartnerModal","useStyles","theme","media","height","closeModal","position","top","right","cursor","padding","zIndex","backgroundColor","color","ListCard","data","classes","root","picture","name","description","type","defaultAddNew","_id","link","Header","onClick","noFilter","PartnersDashboard","filter","setFilter","partners","setPartners","openModal","editElement","state","setState","handleChange","value","toggleState","resetState","handleClose","handleActiveFilter","reloadPartners","list","handleEditSelect","id","find","e","handleDelete","filteredList","elem","map","preventDefault","stopPropagation","adminRequired"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState, useCallback, useEffect } from 'react';\nimport {\n  Grid,\n  Card,\n  CardActionArea,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AdminContentWrapper } from '../../components/wrapper';\nimport { Modal, Icon } from '../../components/form';\n// import { ReactComponent as LotsIcon } from 'assets/img/svg/partners.svg';\n// import { ReactComponent as AddIcon } from 'assets/img/svg/add.svg';\nimport { getPartnersApiMethod, deletePartnerApiMethod } from '../../lib/api/admin';\nimport withAuth from '../../lib/withAuth';\nimport { partnerTypeListKeys, partnerTypes } from '../../helpers/partner';\nimport PartnerModal from '../../components/admin/partnerModal';\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    height: 140,\n  },\n  closeModal: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    cursor: 'pointer',\n    padding: 10,\n    zIndex: 10,\n    '&:hover': {\n      backgroundColor: '#bbd0ff',\n      color: 'white',\n    },\n  },\n}));\n\nfunction ListCard({ data }) {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.root}>\n      <CardActionArea>\n        <CardMedia className={classes.media} image={data?.picture} title=\"Contemplative Reptile\" />\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\n            {data.name}\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            {data.description}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      <CardActions>\n        <div className=\"auto\">{partnerTypes[data.type]}</div>\n      </CardActions>\n    </Card>\n  );\n}\nconst defaultAddNew = {\n  _id: null,\n  picture: null,\n  name: 'aaaa-',\n  description: 'bbbb',\n  link: 'cccc',\n  position: 5,\n};\nconst Header = ({ onClick }) => (\n  <Grid container justify=\"space-between\" alignItems=\"center\">\n    <Grid item>\n      <Grid>\n        <span className=\"header-icon\">\n          <Icon type=\"sponsorship\" size=\"small\" />\n        </span>\n        <h1>Offres partenaires</h1>\n      </Grid>\n    </Grid>\n    <Grid item>\n      <Grid onClick={onClick} className=\"submit pointer partner-add\">\n        <span className=\"header-icon\">\n          <Icon type=\"plus\" size=\"small\" />\n        </span>\n        <p>Ajouter</p>\n      </Grid>\n    </Grid>\n  </Grid>\n);\n\nconst noFilter = null;\nconst PartnersDashboard = () => {\n  const [filter, setFilter] = useState(noFilter);\n  const [partners, setPartners] = useState([]);\n  const [state, setState] = useState({\n    openModal: false,\n    editElement: {},\n  });\n\n  const handleChange = useCallback((name, value) => setState({ ...state, [name]: value }), [\n    state,\n    setState,\n  ]);\n  const toggleState = (name) => handleChange(name, !state[name]);\n  const resetState = useCallback(\n    () =>\n      setState({ ...state, openModal: false, filter: noFilter, ...defaultAddNew, editElement: {} }),\n    [state, setState],\n  );\n  const handleClose = () => resetState();\n  const handleActiveFilter = useCallback((name) => setFilter(name), [setFilter]);\n  const onClick = () => toggleState('openModal');\n  const reloadPartners = useCallback(async () => {\n    const { list } = await getPartnersApiMethod();\n    setPartners(list);\n    resetState();\n  }, [resetState, setPartners]);\n  const handleEditSelect = (id) => {\n    setState({ openModal: true, editElement: partners.find((e) => e._id === id) });\n  };\n  const handleDelete = async (id) => {\n    await deletePartnerApiMethod(id);\n    reloadPartners();\n  };\n  useEffect(() => {\n    reloadPartners();\n  }, []);\n  const filteredList = filter ? partners.filter((elem) => elem.type === filter) : partners;\n  const classes = useStyles();\n\n  return (\n    <>\n      <AdminContentWrapper>\n        <Modal\n          openModal={state.openModal}\n          onClose={handleClose}\n          onClick={onClick}\n          showActions={false}\n        >\n          <Grid container item xs={12} justify=\"flex-start\">\n            <PartnerModal\n              current={state.editElement}\n              handleSubmit={reloadPartners}\n              handleClose={handleClose}\n            />\n            {/* <Input /> */}\n          </Grid>\n        </Modal>\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          className=\"spacing header\"\n        >\n          <Grid item container xs={12} justify=\"flex-start\">\n            <Grid item container alignItems=\"center\">\n              <Header onClick={onClick} />\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid container>\n          <Grid container justify=\"center\">\n            <div onClick={() => handleActiveFilter(noFilter)} className=\"partner-filter\">\n              Tout\n            </div>\n            {partnerTypeListKeys.map((elem) => (\n              // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n              <div\n                key={elem}\n                onClick={() => handleActiveFilter(elem)}\n                className={`partner-filter ${elem === filter ? 'active' : ''}`}\n              >\n                {partnerTypes[elem]}\n              </div>\n            ))}\n          </Grid>\n          <Grid container className=\"partner-card-list-container\" justify=\"space-arround\">\n            {filteredList.map((elem) => (\n              <Grid\n                item\n                key={elem._id}\n                alignItems=\"center\"\n                md={4}\n                onClick={() => handleEditSelect(elem._id)}\n                className=\"partner-card-list relative\"\n              >\n                <span\n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    handleDelete(elem._id);\n                  }}\n                  className={classes.closeModal}\n                >\n                  x\n                </span>\n                <ListCard data={elem} />\n              </Grid>\n            ))}\n          </Grid>\n        </Grid>\n      </AdminContentWrapper>\n      {/* <ListMaker {...props} /> */}\n    </>\n  );\n};\nexport default withAuth(PartnersDashboard, { adminRequired: true });\n"]},"metadata":{},"sourceType":"module"}