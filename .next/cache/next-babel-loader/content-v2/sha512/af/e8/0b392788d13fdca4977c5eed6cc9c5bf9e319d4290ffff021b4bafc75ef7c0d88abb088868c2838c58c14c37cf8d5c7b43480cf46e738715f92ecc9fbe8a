{"ast":null,"code":"var _jsxFileName = \"/usr/src/kit-le-nid/pages/admin/partners.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Grid, Card, CardActionArea, CardActions, CardContent, CardMedia, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AdminContentWrapper } from '../../components/wrapper';\nimport { Modal, Icon } from '../../components/form'; // import { ReactComponent as LotsIcon } from 'assets/img/svg/partners.svg';\n// import { ReactComponent as AddIcon } from 'assets/img/svg/add.svg';\n\nimport { getPartnersApiMethod, deletePartnerApiMethod } from '../../lib/api/admin';\nimport withAuth from '../../lib/withAuth';\nimport { partnerTypeListKeys, partnerTypes } from '../../helpers/partner';\nimport PartnerModal from '../../components/admin/partnerModal';\nconst useStyles = makeStyles(theme => ({\n  media: {\n    height: 140\n  },\n  closeModal: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    cursor: 'pointer',\n    padding: 10,\n    zIndex: 10,\n    '&:hover': {\n      backgroundColor: '#bbd0ff',\n      color: 'white'\n    }\n  }\n}));\n\nfunction ListCard({\n  data\n}) {\n  const classes = useStyles();\n  return __jsx(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, __jsx(CardActionArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, __jsx(CardMedia, {\n    className: classes.media,\n    image: data === null || data === void 0 ? void 0 : data.picture,\n    title: \"Contemplative Reptile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    gutterBottom: true,\n    variant: \"h5\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, data.name), __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, data.description))), __jsx(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, partnerTypes[data.type])));\n}\n\nconst defaultAddNew = {\n  _id: null,\n  picture: null,\n  name: 'aaaa-',\n  description: 'bbbb',\n  link: 'cccc',\n  position: 5\n};\n\nconst Header = ({\n  onClick\n}) => __jsx(Grid, {\n  container: true,\n  justify: \"space-between\",\n  alignItems: \"center\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 3\n  }\n}, __jsx(Grid, {\n  item: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }\n}, __jsx(Grid, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 7\n  }\n}, __jsx(\"span\", {\n  className: \"header-icon\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }\n}, __jsx(Icon, {\n  type: \"sponsorship\",\n  size: \"small\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 11\n  }\n})), __jsx(\"h1\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }\n}, \"Offres partenaires\"))), __jsx(Grid, {\n  item: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }\n}, __jsx(Grid, {\n  onClick: onClick,\n  className: \"submit pointer partner-add\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 7\n  }\n}, __jsx(\"span\", {\n  className: \"header-icon\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }\n}, __jsx(Icon, {\n  type: \"plus\",\n  size: \"small\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 11\n  }\n})), __jsx(\"p\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }\n}, \"Ajouter\"))));\n\nconst noFilter = null;\n\nconst PartnersDashboard = () => {\n  const {\n    0: filter,\n    1: setFilter\n  } = useState(noFilter);\n  const {\n    0: partners,\n    1: setPartners\n  } = useState([]);\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    openModal: false,\n    editElement: {}\n  });\n  const handleChange = useCallback((name, value) => setState(_objectSpread(_objectSpread({}, state), {}, {\n    [name]: value\n  })), [state, setState]);\n\n  const toggleState = name => handleChange(name, !state[name]);\n\n  const resetState = useCallback(() => setState(_objectSpread(_objectSpread(_objectSpread({}, state), {}, {\n    openModal: false,\n    filter: noFilter\n  }, defaultAddNew), {}, {\n    editElement: {}\n  })), [state, setState]);\n\n  const handleClose = () => resetState();\n\n  const handleActiveFilter = useCallback(name => setFilter(name), [setFilter]);\n\n  const onClick = () => toggleState('openModal');\n\n  const reloadPartners = useCallback(async () => {\n    const {\n      list\n    } = await getPartnersApiMethod();\n    setPartners(list);\n    resetState();\n  }, [resetState, setPartners]);\n\n  const handleEditSelect = id => {\n    setState({\n      openModal: true,\n      editElement: partners.find(e => e._id === id)\n    });\n  };\n\n  const handleDelete = async id => {\n    await deletePartnerApiMethod(id);\n    reloadPartners();\n  };\n\n  useEffect(() => {\n    reloadPartners();\n  }, []);\n  const filteredList = filter ? partners.filter(elem => elem.type === filter) : partners;\n  const classes = useStyles();\n  return __jsx(React.Fragment, null, __jsx(AdminContentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, __jsx(Modal, {\n    openModal: state.openModal,\n    onClose: handleClose,\n    onClick: onClick,\n    showActions: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    container: true,\n    item: true,\n    xs: 12,\n    justify: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, __jsx(PartnerModal, {\n    current: state.editElement,\n    handleSubmit: reloadPartners,\n    handleClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }))), __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\",\n    alignItems: \"center\",\n    className: \"spacing header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    item: true,\n    container: true,\n    xs: 12,\n    justify: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    item: true,\n    container: true,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, __jsx(Header, {\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  })))), __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    onClick: () => handleActiveFilter(noFilter),\n    className: \"partner-filter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, \"Tout\"), partnerTypeListKeys.map(elem => // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n  __jsx(\"div\", {\n    key: elem,\n    onClick: () => handleActiveFilter(elem),\n    className: `partner-filter ${elem === filter ? 'active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, partnerTypes[elem]))), __jsx(Grid, {\n    container: true,\n    className: \"partner-card-list-container\",\n    justify: \"space-arround\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, filteredList.map(elem => __jsx(Grid, {\n    item: true,\n    key: elem._id,\n    alignItems: \"center\",\n    md: 4,\n    onClick: () => handleEditSelect(elem._id),\n    className: \"partner-card-list relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    onClick: e => {\n      e.preventDefault();\n      e.stopPropagation();\n      handleDelete(elem._id);\n    },\n    className: classes.closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, \"x\"), __jsx(ListCard, {\n    data: elem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nexport default withAuth(PartnersDashboard, {\n  adminRequired: true\n});","map":{"version":3,"sources":["/usr/src/kit-le-nid/pages/admin/partners.js"],"names":["React","useState","useCallback","useEffect","Grid","Card","CardActionArea","CardActions","CardContent","CardMedia","Typography","makeStyles","AdminContentWrapper","Modal","Icon","getPartnersApiMethod","deletePartnerApiMethod","withAuth","partnerTypeListKeys","partnerTypes","PartnerModal","useStyles","theme","media","height","closeModal","position","top","right","cursor","padding","zIndex","backgroundColor","color","ListCard","data","classes","root","picture","name","description","type","defaultAddNew","_id","link","Header","onClick","noFilter","PartnersDashboard","filter","setFilter","partners","setPartners","state","setState","openModal","editElement","handleChange","value","toggleState","resetState","handleClose","handleActiveFilter","reloadPartners","list","handleEditSelect","id","find","e","handleDelete","filteredList","elem","map","preventDefault","stopPropagation","adminRequired"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState, useCallback, useEffect } from 'react';\nimport {\n  Grid,\n  Card,\n  CardActionArea,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AdminContentWrapper } from '../../components/wrapper';\nimport { Modal, Icon } from '../../components/form';\n// import { ReactComponent as LotsIcon } from 'assets/img/svg/partners.svg';\n// import { ReactComponent as AddIcon } from 'assets/img/svg/add.svg';\nimport { getPartnersApiMethod, deletePartnerApiMethod } from '../../lib/api/admin';\nimport withAuth from '../../lib/withAuth';\nimport { partnerTypeListKeys, partnerTypes } from '../../helpers/partner';\nimport PartnerModal from '../../components/admin/partnerModal';\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    height: 140,\n  },\n  closeModal: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    cursor: 'pointer',\n    padding: 10,\n    zIndex: 10,\n    '&:hover': {\n      backgroundColor: '#bbd0ff',\n      color: 'white',\n    },\n  },\n}));\n\nfunction ListCard({ data }) {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.root}>\n      <CardActionArea>\n        <CardMedia className={classes.media} image={data?.picture} title=\"Contemplative Reptile\" />\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\n            {data.name}\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            {data.description}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      <CardActions>\n        <div className=\"auto\">{partnerTypes[data.type]}</div>\n      </CardActions>\n    </Card>\n  );\n}\nconst defaultAddNew = {\n  _id: null,\n  picture: null,\n  name: 'aaaa-',\n  description: 'bbbb',\n  link: 'cccc',\n  position: 5,\n};\nconst Header = ({ onClick }) => (\n  <Grid container justify=\"space-between\" alignItems=\"center\">\n    <Grid item>\n      <Grid>\n        <span className=\"header-icon\">\n          <Icon type=\"sponsorship\" size=\"small\" />\n        </span>\n        <h1>Offres partenaires</h1>\n      </Grid>\n    </Grid>\n    <Grid item>\n      <Grid onClick={onClick} className=\"submit pointer partner-add\">\n        <span className=\"header-icon\">\n          <Icon type=\"plus\" size=\"small\" />\n        </span>\n        <p>Ajouter</p>\n      </Grid>\n    </Grid>\n  </Grid>\n);\n\nconst noFilter = null;\nconst PartnersDashboard = () => {\n  const [filter, setFilter] = useState(noFilter);\n  const [partners, setPartners] = useState([]);\n  const [state, setState] = useState({\n    openModal: false,\n    editElement: {},\n  });\n\n  const handleChange = useCallback((name, value) => setState({ ...state, [name]: value }), [\n    state,\n    setState,\n  ]);\n  const toggleState = (name) => handleChange(name, !state[name]);\n  const resetState = useCallback(\n    () =>\n      setState({ ...state, openModal: false, filter: noFilter, ...defaultAddNew, editElement: {} }),\n    [state, setState],\n  );\n  const handleClose = () => resetState();\n  const handleActiveFilter = useCallback((name) => setFilter(name), [setFilter]);\n  const onClick = () => toggleState('openModal');\n  const reloadPartners = useCallback(async () => {\n    const { list } = await getPartnersApiMethod();\n    setPartners(list);\n    resetState();\n  }, [resetState, setPartners]);\n  const handleEditSelect = (id) => {\n    setState({ openModal: true, editElement: partners.find((e) => e._id === id) });\n  };\n  const handleDelete = async (id) => {\n    await deletePartnerApiMethod(id);\n    reloadPartners();\n  };\n  useEffect(() => {\n    reloadPartners();\n  }, []);\n  const filteredList = filter ? partners.filter((elem) => elem.type === filter) : partners;\n  const classes = useStyles();\n\n  return (\n    <>\n      <AdminContentWrapper>\n        <Modal\n          openModal={state.openModal}\n          onClose={handleClose}\n          onClick={onClick}\n          showActions={false}\n        >\n          <Grid container item xs={12} justify=\"flex-start\">\n            <PartnerModal\n              current={state.editElement}\n              handleSubmit={reloadPartners}\n              handleClose={handleClose}\n            />\n            {/* <Input /> */}\n          </Grid>\n        </Modal>\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          className=\"spacing header\"\n        >\n          <Grid item container xs={12} justify=\"flex-start\">\n            <Grid item container alignItems=\"center\">\n              <Header onClick={onClick} />\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid container>\n          <Grid container justify=\"center\">\n            <div onClick={() => handleActiveFilter(noFilter)} className=\"partner-filter\">\n              Tout\n            </div>\n            {partnerTypeListKeys.map((elem) => (\n              // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n              <div\n                key={elem}\n                onClick={() => handleActiveFilter(elem)}\n                className={`partner-filter ${elem === filter ? 'active' : ''}`}\n              >\n                {partnerTypes[elem]}\n              </div>\n            ))}\n          </Grid>\n          <Grid container className=\"partner-card-list-container\" justify=\"space-arround\">\n            {filteredList.map((elem) => (\n              <Grid\n                item\n                key={elem._id}\n                alignItems=\"center\"\n                md={4}\n                onClick={() => handleEditSelect(elem._id)}\n                className=\"partner-card-list relative\"\n              >\n                <span\n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    handleDelete(elem._id);\n                  }}\n                  className={classes.closeModal}\n                >\n                  x\n                </span>\n                <ListCard data={elem} />\n              </Grid>\n            ))}\n          </Grid>\n        </Grid>\n      </AdminContentWrapper>\n      {/* <ListMaker {...props} /> */}\n    </>\n  );\n};\nexport default withAuth(PartnersDashboard, { adminRequired: true });\n"]},"metadata":{},"sourceType":"module"}