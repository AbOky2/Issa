{"ast":null,"code":"import _defineProperty from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Head from 'next/head';\nimport NProgress from 'nprogress';\nimport { Grid, Checkbox, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Btn, Select, Input } from '../../components/form';\nimport withAuth from '../../lib/withAuth';\nimport { Student, Buyer } from '../../helpers/user';\nimport { signIn, signUp } from '../../lib/api/public';\nimport LogoImg from '../../static/img/logo-full.png';\nvar useStyles = makeStyles({\n  container: {\n    height: '100%',\n    paddingTop: '3rem',\n    '& > div > a > img': {\n      width: 137\n    },\n    '& h1': {\n      display: 'block',\n      marginTop: 0,\n      marginBottom: '1rem',\n      textAlign: 'center',\n      fontFamily: 'Open Sans',\n      fontSize: '3rem',\n      fontWeight: 'bold',\n      letterSpacing: 'normal',\n      color: '#4f80ff'\n    },\n    '& h2': {\n      paddingLeft: '0',\n      marginTop: '0',\n      marginBottom: '30px',\n      textAlign: 'center',\n      fontFamily: 'Open Sans',\n      fontSize: '1.8rem',\n      fontWeight: '600',\n      color: 'rgba(26, 46, 108, 0.5)'\n    },\n    '& > div > a': {\n      marginBottom: '3.5rem'\n    },\n    '& input': {\n      display: 'block',\n      padding: '3rem 1.4rem',\n      boxSizing: 'border-box',\n      width: '100%',\n      height: '38px',\n      borderRadius: '6px',\n      border: 'solid 1px #c7cfd6',\n      fontFamily: 'Open Sans',\n      fontSize: '1.4rem',\n      fontWeight: 'normal',\n      fontStretch: 'normal',\n      fontStyle: 'normal',\n      lineHeight: 'normal',\n      letterSpacing: 'normal',\n      color: '#8e97a1'\n    },\n    '& input:focus': {\n      boxShadow: '0px 4px 10px 3px rgba(0, 0, 0, 0.11)',\n      borderColor: '#06ae88'\n    },\n    '& a': {\n      display: 'inline-block',\n      color: '#0fc1a9'\n    }\n  },\n  signinFormContainer: {\n    padding: '4rem 8.5rem ',\n    backgroundColor: 'white',\n    borderRadius: '1rem',\n    borderTopLeftRadius: '0',\n    borderBottomLeftRadius: '0'\n  },\n  formContainerParent: {\n    minHeight: '100vh',\n    margin: 'auto'\n  },\n  formContainer: {\n    borderRadius: '15px',\n    textAlign: 'left',\n    '& p': {\n      fontFamily: 'Open Sans',\n      fontSize: '1.6rem'\n    }\n  },\n  signinLogo: {\n    borderTopLeftRadius: '1rem',\n    borderBottomLeftRadius: '1rem',\n    background: \"url('../../static/img/login.png') no-repeat\",\n    backgroundSize: 'cover'\n  },\n  loginBtn: {\n    padding: '2rem 0'\n  },\n  btnContainer: {\n    marginTop: 30,\n    '& > div:first-of-type': {\n      paddingRight: 5\n    },\n    '& > div:last-of-type': {\n      paddingLeft: 5\n    }\n  },\n  checkBoxContainer: {\n    marginTop: '2rem',\n    '& > span': {\n      paddingLeft: 0\n    },\n    '& h3': {\n      color: 'rgba(26, 46, 108, 0.5)'\n    }\n  }\n});\n\nvar SignUp = function SignUp(_ref) {\n  var _ref$values = _ref.values,\n      values = _ref$values === void 0 ? {} : _ref$values,\n      handleChange = _ref.handleChange;\n  return __jsx(Grid, {\n    container: true,\n    item: true\n  }, __jsx(Input, {\n    label: \"Nom*\",\n    placeholder: \"Nom*\",\n    onChange: handleChange,\n    name: \"lastName\",\n    position: \"left\"\n  }), __jsx(Input, {\n    label: \"Pr\\xE9nom*\",\n    placeholder: \"Pr\\xE9nom*\",\n    onChange: handleChange,\n    name: \"firstName\",\n    position: \"right\"\n  }), __jsx(Input, {\n    label: \"E-mail*\",\n    placeholder: \"Votre e-mail\",\n    onChange: handleChange,\n    name: \"email\",\n    type: \"email\",\n    position: \"left\"\n  }), __jsx(Input, {\n    label: \"T\\xE9l\\xE9phone\",\n    placeholder: \"T\\xE9l\\xE9phone\",\n    onChange: handleChange,\n    name: \"phone\",\n    type: \"phone\",\n    position: \"right\"\n  }), __jsx(Input, {\n    label: \"Mot de passe\",\n    placeholder: \"Mot de passe\",\n    onChange: handleChange,\n    name: \"password\",\n    type: \"password\",\n    position: \"left\"\n  }), __jsx(Select, {\n    name: \"status\",\n    value: values.role,\n    onChange: handleChange,\n    list: [{\n      name: 'Etudiant',\n      value: Student\n    }, {\n      name: 'Jeune Actif',\n      value: Buyer\n    }],\n    label: \"Status\",\n    position: \"right\"\n  }), __jsx(Input, {\n    label: \"Code parrain\",\n    placeholder: \"Code\",\n    onChange: handleChange,\n    name: \"sponsorshipCode\"\n  }));\n};\n\nvar SignIn = function SignIn(_ref2) {\n  var _ref2$values = _ref2.values,\n      values = _ref2$values === void 0 ? {} : _ref2$values,\n      handleChange = _ref2.handleChange;\n  return __jsx(React.Fragment, null, __jsx(Input, {\n    label: \"E-mail*\",\n    value: values.email,\n    onChange: handleChange,\n    name: \"email\",\n    type: \"email\",\n    position: \"left\"\n  }), __jsx(Input, {\n    label: \"Mot de passe\",\n    value: values.password,\n    onChange: handleChange,\n    name: \"password\",\n    type: \"password\",\n    position: \"right\"\n  }));\n};\n\nvar LoginTab = function LoginTab() {\n  var _useState = useState({\n    email: 'toto@test.test',\n    firstName: 'toto',\n    lastName: 'toto',\n    password: 'test',\n    phone: '000000000',\n    sponsorshipCode: 'sdfsdf',\n    role: Student\n  }),\n      state = _useState[0],\n      setState = _useState[1]; // const [state, setState] = useState({ email: 'roomer@test.test', password: 'test' });\n\n\n  var _useState2 = useState(true),\n      isRegisterinView = _useState2[0],\n      setIsRegisterinView = _useState2[1];\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      checked = _React$useState2[0],\n      setChecked = _React$useState2[1];\n\n  var handleCheck = function handleCheck(event) {\n    setChecked(event.target.checked);\n  };\n\n  var toggleView = function toggleView() {\n    return setIsRegisterinView(!isRegisterinView);\n  };\n\n  var onClick = function onClick() {\n    var data = state;\n    var authReq = signUp;\n    NProgress.start();\n\n    if (!isRegisterinView) {\n      data = {\n        email: data.email,\n        password: data.password\n      };\n      authReq = signIn;\n    }\n\n    authReq(data).then(function (_ref3) {\n      var user = _ref3.user;\n      NProgress.done();\n      window.location = user.role === 'admin' ? '/admin' : '/dashboard';\n    });\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (_ref4) {\n      var value = _ref4.target.value;\n      return setState(_objectSpread(_objectSpread({}, state), {}, _defineProperty({}, name, value)));\n    };\n  };\n\n  var classes = useStyles();\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Login\")), __jsx(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    id: \"login\",\n    className: classes.container\n  }, __jsx(\"div\", {\n    className: \"fullwidth text-center\"\n  }, __jsx(\"a\", {\n    href: \"/\"\n  }, __jsx(\"img\", {\n    src: LogoImg,\n    alt: \"kit le nid\"\n  })), __jsx(Grid, {\n    container: true,\n    item: true,\n    alignItems: \"stretch\",\n    justify: \"center\"\n  }, __jsx(Grid, {\n    item: true,\n    xs: 6,\n    className: classes.signinLogo\n  }), __jsx(Grid, {\n    container: true,\n    item: true,\n    direction: \"column\",\n    justify: \"space-between\",\n    alignItems: \"center\",\n    md: 6,\n    xs: 12,\n    className: classes.signinFormContainer\n  }, __jsx(Grid, {\n    container: true,\n    item: true,\n    alignItems: \"flex-end\"\n  }, __jsx(\"div\", {\n    className: \"fullwidth\"\n  }, __jsx(\"h1\", null, isRegisterinView ? 'Inscrivez-vous gratuitement !' : 'Connexion'), __jsx(\"h2\", null, \"Acc\\xE9der \\xE0 tout notre accompagnement.\"), __jsx(Grid, {\n    container: true,\n    item: true,\n    justify: \"center\",\n    className: classes.formContainer\n  }, isRegisterinView ? __jsx(SignUp, {\n    values: state,\n    handleChange: handleChange,\n    onClick: onClick\n  }) : __jsx(SignIn, {\n    values: state,\n    handleChange: handleChange,\n    onClick: onClick\n  })), isRegisterinView && __jsx(Grid, {\n    container: true,\n    alignItems: \"center\",\n    className: classes.checkBoxContainer\n  }, __jsx(Checkbox, {\n    color: \"primary\",\n    inputProps: {\n      'aria-label': 'secondary checkbox'\n    }\n  }), __jsx(Typography, {\n    variant: \"h3\"\n  }, \"J\\u2019accepte les conditions g\\xE9n\\xE9rales\")), __jsx(Grid, {\n    container: true,\n    justify: \"center\",\n    className: classes.btnContainer\n  }, __jsx(Grid, {\n    item: true\n  }, __jsx(Btn, {\n    text: isRegisterinView ? 'Cr√©er un compte' : 'Connectez-vous',\n    onClick: onClick,\n    className: \"blueColor full login-btn\"\n  })), __jsx(Grid, {\n    item: true\n  }, __jsx(Btn, {\n    text: isRegisterinView ? 'Connectez-vous' : 'Cr√©er un compte',\n    onClick: toggleView,\n    whiteColor: true\n  }))))))))));\n};\n\nexport default withAuth(LoginTab, {\n  logoutRequired: true\n});","map":null,"metadata":{},"sourceType":"module"}