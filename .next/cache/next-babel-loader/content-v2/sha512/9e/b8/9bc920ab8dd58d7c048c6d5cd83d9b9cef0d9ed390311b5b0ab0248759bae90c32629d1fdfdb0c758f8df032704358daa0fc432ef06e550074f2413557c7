{"ast":null,"code":"import _regeneratorRuntime from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport clsx from 'clsx';\nimport Link from 'next/link';\nimport { Grid, Typography } from '@material-ui/core';\nimport ReactMarkdown from 'react-markdown';\nimport { withStyles } from '@material-ui/core/styles';\nimport withAuth from '../../lib/withAuth';\nimport { AdminContentWrapper } from '../../components/wrapper';\nimport { Icon } from '../../components/form';\nimport { partnerTypes } from '../../helpers/partner';\nimport { buyStrategy, isRoomer } from '../../helpers/user';\nimport { ucfirst } from '../../helpers/convertAndCheck';\nimport { getPartnersApiMethod } from '../../lib/api/customer';\nimport LocationImg from '../../static/img/location.png';\nimport HouseImg from '../../static/img/house.png';\n\nvar styles = function styles(theme) {\n  return {\n    container: {\n      padding: '2.8rem',\n      marginTop: '3rem',\n      marginBottom: '6rem',\n      backgroundColor: 'white',\n      boxShadow: '0px 4px 20px rgb(24 55 50 / 4%)',\n      borderRadius: '25px',\n      textAlign: 'left'\n    },\n    presentationContainer: _defineProperty({\n      '& > div:first-of-type': {\n        paddingRight: '1.5rem'\n      },\n      '& > div:last-of-type': {\n        paddingLeft: '1.5rem'\n      },\n      '& > div:first-of-type > div': {\n        height: '100%',\n        background: 'linear-gradient(99.78deg, #CC95DF -24.64%, #4F80FF 62.6%)',\n        boxShadow: '0px 6px 15px rgba(79, 128, 255, 0.3), inset 0px -3px 10px rgba(12, 37, 100, 0.3)'\n      },\n      '& > div:last-of-type > div': {\n        height: '100%',\n        boxShadow: '0px 4px 13px rgba(0, 0, 0, 0.1), inset 0px -3px 10px rgba(149, 149, 149, 0.2)'\n      },\n      '& > div > div > a > img': {\n        width: 77\n      },\n      '& > div > div > a > svg': {\n        width: 'auto!important',\n        height: 'auto!important'\n      },\n      '& > div > div': _objectSpread(_objectSpread({\n        position: 'relative',\n        padding: 32\n      }, theme.ui.bordered), {}, {\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat'\n      }),\n      '& > div > div div svg': {\n        position: 'absolute',\n        bottom: 16,\n        right: 16\n      }\n    }, theme.breakpoints.down('sm'), {\n      '& > div:first-of-type': {\n        marginBottom: '2rem'\n      },\n      '& > div:first-of-type, & > div:last-of-type': {\n        padding: 0,\n        width: '100%'\n      }\n    }),\n    heading: _defineProperty({\n      '& > div': {\n        display: 'none'\n      }\n    }, theme.breakpoints.down('sm'), {\n      '& > div': {\n        display: 'block',\n        marginBottom: 15\n      },\n      textAlign: 'center'\n    }),\n    welcomeSub: {\n      display: 'block',\n      fontWeight: 'normal'\n    },\n    subTitle: {\n      margin: '1.2rem 0 2.5rem'\n    },\n    customH2: {\n      fontFamily: 'Nunito',\n      fontWeight: 'bold'\n    },\n    presentationCardTitle: {\n      color: theme.palette.newBlue,\n      margin: '1.6rem 0 .5rem'\n    },\n    buyText: {\n      color: '#526190'\n    },\n    partnerDescription: {\n      margin: '.5rem 0 2rem'\n    },\n    partnerListContainer: _objectSpread(_objectSpread({\n      width: 'calc(33% - 11px)',\n      background: '#ffffff',\n      boxShadow: '0px 0px 2px rgb(0 0 0 / 25%)'\n    }, theme.ui.bordered), {}, _defineProperty({\n      padding: '2rem',\n      marginBottom: '2rem',\n      '&:nth-child(3n+2)': {\n        margin: '0 2.1rem 2rem'\n      }\n    }, theme.breakpoints.down('sm'), {\n      '&:nth-child(3n+2)': {\n        margin: '0 0 2rem'\n      },\n      width: '100%',\n      '&:last-of-type': {\n        marginBottom: 0\n      }\n    })),\n    whiteColor: {\n      color: 'white'\n    },\n    partnerListImgContainer: {\n      height: 70,\n      marginTop: '3rem',\n      textAlign: 'center',\n      backgroundSize: 'contain',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center'\n    },\n    partnerCardType: {\n      display: 'inline-block',\n      padding: '8px 14px',\n      borderRadius: '9px',\n      fontSize: 12,\n      fontWeight: 'bold',\n      lineHeight: '16px',\n      color: '#BE8B07',\n      background: 'rgba(248, 191, 44, 0.2)',\n      margin: '10px 0 8px'\n    },\n    partnerCardTitle: {\n      marginBottom: '4px',\n      color: '#4F80FF'\n    },\n    partnerListTextContainer: {\n      position: 'relative',\n      width: '100%',\n      '& > p': {\n        width: 'calc(100% - 3rem)',\n        color: '#4F80FF',\n        margin: 0\n      },\n      '& p': {\n        margin: 0\n      },\n      '& > svg': {\n        position: 'absolute',\n        bottom: '0',\n        right: '0',\n        transform: 'translateY(.5rem)'\n      }\n    }\n  };\n};\n\nvar Dashboard = function Dashboard(_ref) {\n  var user = _ref.user,\n      partners = _ref.partners,\n      classes = _ref.classes;\n  return __jsx(AdminContentWrapper, null, __jsx(\"div\", {\n    className: classes.heading\n  }, __jsx(\"div\", null, __jsx(Icon, {\n    type: \"logo\",\n    size: \"large\"\n  })), __jsx(Typography, {\n    variant: \"h1\"\n  }, \"Bonjour \".concat(ucfirst(user === null || user === void 0 ? void 0 : user.firstName), \" \"), __jsx(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"\"\n  }, \"\\uD83C\\uDF89\"), __jsx(\"span\", {\n    className: classes.welcomeSub\n  }, \"Bienvenue sur votre espace personel Kit le Nid.\"))), __jsx(\"div\", {\n    className: classes.container\n  }, __jsx(Typography, {\n    variant: \"h2\",\n    className: classes.customH2\n  }, \"Premiers pas dans votre logement\"), __jsx(Typography, {\n    variant: \"subtitle1\",\n    className: classes.subTitle\n  }, \"Kit le nid vous accompagne pour votre premier achat, votre location,\", __jsx(\"br\", null), \"vous aide \\xE0 avoir un bon garant.\"), __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    className: classes.presentationContainer\n  }, __jsx(Grid, {\n    item: true,\n    md: 12,\n    lg: 6\n  }, __jsx(\"div\", null, __jsx(Link, {\n    href: \"/dashboard/search\"\n  }, __jsx(\"a\", null, __jsx(\"img\", {\n    src: HouseImg,\n    alt: \"\"\n  }), __jsx(Typography, {\n    variant: \"h4\",\n    className: clsx(classes.whiteColor, classes.presentationCardTitle)\n  }, \"Mon premier achat\"), __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    alignItems: \"flex-end\"\n  }, __jsx(Typography, {\n    className: classes.whiteColor\n  }, isRoomer(user) ? 'Je réserve un logement neuf avec une simple promesse d’embauche. Devenir proprietaire n’a jamais été aussi simple.' : 'N’attendez pas 30 ans pour devenir propriétaire'), __jsx(Icon, {\n    type: \"arrow\",\n    color: \"white\"\n  })))))), __jsx(Grid, {\n    item: true,\n    md: 12,\n    lg: 6\n  }, __jsx(\"div\", null, __jsx(Link, {\n    href: \"/dashboard/search?type=location\"\n  }, __jsx(\"a\", null, __jsx(\"img\", {\n    src: LocationImg,\n    alt: \"\"\n  }), __jsx(Typography, {\n    variant: \"h4\",\n    className: classes.presentationCardTitle\n  }, \"Location\"), __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    alignItems: \"flex-end\"\n  }, __jsx(Typography, {\n    className: classes.buyText\n  }, \"Je choisis mon logement parmis\", __jsx(\"br\", null), \"nos 15 000 et 50 000 appartement\", __jsx(\"br\", null), \"en France.\"), __jsx(Icon, {\n    type: \"arrow\",\n    color: \"lightBlue\"\n  })))))))), __jsx(Typography, {\n    variant: \"h2\",\n    className: classes.customH2\n  }, \"Les services Kit le nid\"), __jsx(Typography, {\n    variant: \"subtitle1\",\n    className: classes.partnerDescription\n  }, \"Kit le nid vous propose un ensemble de services compl\\xE9mentaires n\\xE9goci\\xE9s\", __jsx(\"br\", null), \"avec nos patenaires pour mieux vous accompagner pendant vos \\xE9tudes.\"), __jsx(Grid, {\n    container: true\n  }, partners === null || partners === void 0 ? void 0 : partners.map(function (elem) {\n    return __jsx(Grid, {\n      key: elem._id,\n      item: true,\n      className: classes.partnerListContainer\n    }, __jsx(Link, {\n      href: \"/dashboard/partners/\".concat(elem._id)\n    }, __jsx(\"a\", null, __jsx(\"div\", {\n      className: classes.partnerListImgContainer,\n      style: {\n        backgroundImage: \"url(\".concat(elem.picture, \")\")\n      }\n    }), __jsx(Typography, {\n      variant: \"h5\",\n      className: classes.partnerCardType\n    }, partnerTypes[elem.type]), __jsx(Typography, {\n      variant: \"h4\",\n      className: classes.partnerCardTitle\n    }, elem.name), __jsx(Grid, {\n      container: true,\n      justify: \"space-between\",\n      alignItems: \"flex-end\"\n    }, __jsx(\"div\", {\n      className: classes.partnerListTextContainer\n    }, __jsx(Typography, null, __jsx(ReactMarkdown, null, elem.description)), __jsx(Icon, {\n      type: \"arrow\",\n      color: \"lightBlue\"\n    }))))));\n  })));\n};\n\nDashboard.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var req, res, headers, _yield$getPartnersApi, list;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref2.req, res = _ref2.res;\n\n            if (!(req && !req.user)) {\n              _context.next = 4;\n              break;\n            }\n\n            res.redirect('/login');\n            return _context.abrupt(\"return\", {\n              partners: []\n            });\n\n          case 4:\n            headers = {};\n\n            if (req && req.headers && req.headers.cookie) {\n              headers.cookie = req.headers.cookie;\n            }\n\n            _context.next = 8;\n            return getPartnersApiMethod({\n              headers: headers\n            });\n\n          case 8:\n            _yield$getPartnersApi = _context.sent;\n            list = _yield$getPartnersApi.list;\n            return _context.abrupt(\"return\", {\n              partners: list\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default withAuth(withStyles(styles)(Dashboard));","map":null,"metadata":{},"sourceType":"module"}