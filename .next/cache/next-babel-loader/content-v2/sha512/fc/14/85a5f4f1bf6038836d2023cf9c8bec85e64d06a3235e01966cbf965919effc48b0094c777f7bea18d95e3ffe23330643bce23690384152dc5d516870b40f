{"ast":null,"code":"import _regeneratorRuntime from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _objectWithoutProperties from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { addPartnerApiMethod, updatePartnerApiMethod } from '../../../lib/api/admin';\nimport First from './first';\nimport Second from './second';\nimport Third from './third';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      position: 'relatve',\n      width: '100%'\n    },\n    backButton: {\n      marginRight: theme.spacing(1)\n    },\n    instructions: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    closeModal: {\n      position: 'sticky',\n      cursor: 'pointer',\n      padding: 10,\n      zIndex: 10,\n      backgroundColor: 'white',\n      '&:hover': {\n        backgroundColor: '#bbd0ff',\n        color: 'white'\n      }\n    }\n  };\n});\n\nvar getSteps = function getSteps() {\n  return ['Information', 'Autre', 'Contenu'];\n};\n\nexport default function HorizontalLabelPositionBelowStepper(_ref) {\n  var _ref$current = _ref.current,\n      current = _ref$current === void 0 ? {} : _ref$current,\n      handleSubmit = _ref.handleSubmit,\n      handleClose = _ref.handleClose;\n  var classes = useStyles();\n\n  var _useState = useState(current),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(0),\n      activeStep = _useState2[0],\n      setActiveStep = _useState2[1];\n\n  var steps = getSteps();\n\n  var handleBack = function handleBack() {\n    return setActiveStep(function (prevActiveStep) {\n      return prevActiveStep - 1;\n    });\n  };\n\n  var handleReset = function handleReset() {\n    return setActiveStep(0);\n  };\n\n  var handleChange = useCallback(function (name) {\n    return function (value) {\n      return setState(_objectSpread(_objectSpread({}, state), {}, _defineProperty({}, name, value)));\n    };\n  }, [state, setState]);\n\n  var handleNext = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data, _id, form;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(activeStep === steps.length - 1)) {\n                _context.next = 14;\n                break;\n              }\n\n              if (!(state !== null && state !== void 0 && state._id)) {\n                _context.next = 8;\n                break;\n              }\n\n              _id = state._id, form = _objectWithoutProperties(state, [\"_id\"]);\n              _context.next = 5;\n              return updatePartnerApiMethod(_id, form);\n\n            case 5:\n              data = _context.sent;\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.next = 10;\n              return addPartnerApiMethod(state);\n\n            case 10:\n              data = _context.sent;\n\n            case 11:\n              handleSubmit(data.list);\n              _context.next = 15;\n              break;\n\n            case 14:\n              setActiveStep(function (prevActiveStep) {\n                return prevActiveStep + 1;\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleNext() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getStepContent = function getStepContent(stepIndex) {\n    switch (stepIndex) {\n      case 0:\n        return __jsx(First, {\n          onChange: handleChange,\n          values: state\n        });\n\n      case 1:\n        return __jsx(Second, {\n          onChange: handleChange,\n          values: state\n        });\n\n      case 2:\n        return __jsx(Third, {\n          onChange: handleChange,\n          values: state\n        });\n\n      default:\n        return 'Unknown stepIndex';\n    }\n  };\n\n  useEffect(function () {\n    setState(current);\n  }, [current]);\n  return __jsx(\"div\", {\n    className: classes.root\n  }, __jsx(Stepper, {\n    activeStep: activeStep,\n    alternativeLabel: true\n  }, steps.map(function (label) {\n    return __jsx(Step, {\n      key: label\n    }, __jsx(StepLabel, null, label));\n  })), __jsx(\"div\", null, activeStep === steps.length ? __jsx(\"div\", null, __jsx(Typography, {\n    className: classes.instructions\n  }, \"All steps completed\"), __jsx(Button, {\n    onClick: handleReset\n  }, \"Reset\")) : __jsx(\"div\", null, __jsx(Typography, {\n    className: classes.instructions\n  }, getStepContent(activeStep)), __jsx(\"div\", {\n    className: \"text-center\"\n  }, __jsx(Button, {\n    disabled: activeStep === 0,\n    onClick: handleBack,\n    className: classes.backButton\n  }, \"Precedent\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleNext\n  }, activeStep === steps.length - 1 ? 'Fin' : 'Suivant')))));\n}","map":null,"metadata":{},"sourceType":"module"}