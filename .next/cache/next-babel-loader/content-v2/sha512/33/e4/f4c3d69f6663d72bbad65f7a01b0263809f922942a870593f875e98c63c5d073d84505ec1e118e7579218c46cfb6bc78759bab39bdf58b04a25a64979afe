{"ast":null,"code":"import _regeneratorRuntime from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/usr/src/kit-le-nid/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react'; // import GoogleMapReact from 'google-map-react';\n\nimport { Grid, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AdminContentWrapper } from '../../../components/wrapper';\nimport { Icon, Btn } from '../../../components/form';\nimport { getPropertyApiMethod, getPropertiesApiMethod } from '../../../lib/api/customer';\nimport Carrousel from '../../../components/Carrousel';\nimport withAuth from '../../../lib/withAuth';\nvar useStyles = makeStyles(function (theme) {\n  var _extraInfo;\n\n  return {\n    card: {\n      width: 'calc(100% - 14px)'\n    },\n    title: {\n      color: '#4F80FF'\n    },\n    save: {\n      marginBottom: 30,\n      '& > div': {\n        position: 'absolute',\n        bottom: 0,\n        cursor: 'pointer',\n        width: 'fit-content',\n        padding: '20px 23px',\n        background: '#FFFFFF',\n        border: '2px solid #4F80FF',\n        boxSizing: 'border-box',\n        borderRadius: '10px',\n        transform: 'translateY(calc(50%))'\n      },\n      '& svg': {\n        marginRight: 15\n      }\n    },\n    subTitle: {\n      margin: '4px 0 22px',\n      color: 'rgba(26, 46, 108, 0.75)'\n    },\n    setpsContainer: {\n      paddingRight: 20,\n      '& h3': {\n        marginBottom: 8\n      },\n      '& > div:first-of-type': {\n        padding: '3.2rem',\n        borderRadius: '2.5rem',\n        color: 'white',\n        background: 'white',\n        boxShadow: '0px 4px 20px rgba(24, 55, 50, 0.04)',\n        '& li': {\n          marginBottom: 15\n        },\n        '& span': {\n          padding: '0 5px',\n          color: 'white',\n          marginRight: 10,\n          background: '#4F80FF',\n          borderRadius: '3px'\n        }\n      }\n    },\n    houseInfo: {\n      marginTop: '1.8rem',\n      '& > div > div span': {\n        color: theme.palette.blue\n      },\n      '& > div > div:first-of-type': {\n        marginRight: 40\n      },\n      '& svg': {\n        marginRight: 8\n      }\n    },\n    searchContainer: {\n      marginBottom: 22,\n      '& > div:last-of-type svg': {\n        position: 'absolute',\n        right: 0,\n        top: '50%',\n        width: 40,\n        height: 40,\n        transform: 'translateY(-50%)'\n      },\n      '& > div:nth-child(2) > div > div > div': {\n        backgroundColor: 'white',\n        borderRadius: 0\n      },\n      '& > div:first-of-type input': {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        borderRight: 'none'\n      },\n      '& > div:last-of-type input': {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0\n      }\n    },\n    description: {\n      marginBottom: '1.8rem',\n      '& h2, & h1 > div:last-of-type ': {\n        color: theme.palette.blue\n      },\n      '& h6': {\n        marginBottom: 10,\n        color: 'rgba(26, 46, 108, 0.5)'\n      },\n      '& > div:last-of-type h1 span': {\n        fontSize: '1.6rem',\n        color: 'rgba(26, 46, 108, 0.5)'\n      },\n      '& > div:last-of-type > div': {\n        marginTop: 22\n      }\n    },\n    extraInfo: (_extraInfo = {\n      '& > div': {\n        boxSizing: 'border-box',\n        padding: 32,\n        background: '#F4F5F7',\n        borderRadius: '15px',\n        boxShadow: '0px 0px 2px rgba(0, 0, 0, 0.25)'\n      },\n      '& h3': {\n        color: theme.palette.blue\n      },\n      '& > div:last-of-type > div h6 ': {\n        color: '#526190'\n      },\n      '& > div:first-of-type': {\n        marginBottom: 20\n      }\n    }, _defineProperty(_extraInfo, \"& h3\", {\n      marginBottom: 32\n    }), _defineProperty(_extraInfo, '& > div:last-of-type h6', {\n      marginBottom: 9\n    }), _defineProperty(_extraInfo, '& > div:last-of-type svg', {\n      marginRight: 8\n    }), _extraInfo),\n    mapContainer: {\n      marginTop: 24,\n      '& img': {\n        display: 'block',\n        width: '100%'\n      }\n    },\n    discoveryContainer: {\n      marginTop: '4rem',\n      '& h2': {\n        color: theme.palette.blue,\n        marginBottom: '4rem'\n      },\n      '& > div > div:first-of-type': {\n        borderTop: '1px solid rgba(26, 46, 108, 0.5)'\n      },\n      '& > div > div:nht-child(3)': {\n        background: 'red'\n      },\n      '& > div > div': {\n        padding: '2rem',\n        borderBottom: '1px solid rgba(26, 46, 108, 0.5)'\n      }\n    },\n    phoneContainer: {\n      display: 'inline-block',\n      '& > p': {\n        marginTop: '.8rem',\n        textAlign: 'center',\n        color: 'rgba(26, 46, 108, 0.5)'\n      }\n    }\n  };\n});\nvar bonusList = [{\n  key: 'digicode',\n  value: 'Digicode'\n}, {\n  key: 'elevator',\n  value: 'Ascenseur'\n}, {\n  key: 'intercom',\n  value: 'Intercom'\n}];\n\nvar PropertyPage = function PropertyPage(_ref) {\n  var _ref$property = _ref.property,\n      property = _ref$property === void 0 ? {} : _ref$property,\n      _ref$properties = _ref.properties,\n      properties = _ref$properties === void 0 ? [] : _ref$properties;\n\n  var _useState = useState(false),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var toggle = function toggle() {\n    return setState(!state);\n  };\n\n  var classes = useStyles();\n  return __jsx(AdminContentWrapper, {\n    redirectDashboard: true\n  }, __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"relative\"\n  }, property.pictures && __jsx(Carrousel, {\n    list: property.pictures\n  }), __jsx(Grid, {\n    container: true,\n    className: classes.save,\n    justify: \"center\"\n  }, __jsx(Grid, {\n    item: true,\n    container: true,\n    onClick: toggle\n  }, __jsx(Icon, {\n    type: \"heart\",\n    color: state ? 'red' : 'white',\n    strokeColor: state ? 'red' : 'lightBlue'\n  }), \" Sauvegarder\"))), __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    className: classes.description\n  }, __jsx(Grid, {\n    item: true,\n    md: 6\n  }, __jsx(Typography, {\n    variant: \"h1\"\n  }, property.heading), __jsx(Typography, {\n    variant: \"subtitle1\"\n  }, property.city, \" - \".concat(property.postal)), __jsx(Typography, {\n    variant: \"h2\"\n  }, \"Programme immobilier neuf\"), __jsx(\"div\", {\n    className: classes.houseInfo\n  }, __jsx(Grid, {\n    container: true\n  }, __jsx(\"div\", null, __jsx(Icon, {\n    type: \"door\",\n    color: \"lightBlue\"\n  }), __jsx(\"span\", null, \"de 1 \\xE0 \".concat(property.nb_pieces, \"  pi\\xE8ces\"))), __jsx(\"div\", null, __jsx(Icon, {\n    type: \"room\",\n    color: \"lightBlue\"\n  }), __jsx(\"span\", null, \" de \".concat(property.surface)))))), __jsx(Grid, {\n    item: true,\n    md: 6,\n    className: \"text-right\"\n  }, __jsx(Typography, {\n    variant: \"h1\"\n  }, __jsx(\"span\", null, \"\\xE0 partir de\"), \" \".concat(property.price, \"\\u20AC\")), __jsx(Typography, {\n    variant: \"body1\"\n  }, \"Disponible d\\xE8s le\", \" \".concat(property.available_date)), __jsx(\"div\", {\n    className: classes.phoneContainer\n  }, __jsx(Btn, {\n    text: \"\\xCAtre rappel\\xE9 selon mes dispos\",\n    alignRight: true\n  }), __jsx(Typography, {\n    variant: \"body1\"\n  }, \"ou appeler le 06.65.07.11.66\")))), __jsx(Grid, {\n    container: true,\n    alignItems: \"flex-start\"\n  }, __jsx(Grid, {\n    item: true,\n    md: 8,\n    className: classes.setpsContainer\n  }, __jsx(\"div\", null, __jsx(Typography, {\n    variant: \"h3\"\n  }, \"\\xC0 propos du logement !\"), __jsx(Typography, {\n    variant: \"body1\"\n  }, property.description)), __jsx(\"div\", {\n    className: classes.mapContainer\n  })), __jsx(Grid, {\n    item: true,\n    md: 4,\n    className: classes.extraInfo\n  }, __jsx(\"div\", null, __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Les transports \\xE0 proximit\\xE9 :\"), __jsx(Grid, {\n    container: true,\n    justify: \"space-around\"\n  })), __jsx(\"div\", null, __jsx(Typography, {\n    variant: \"h3\"\n  }, \"Les petits plus :\"), __jsx(Grid, null, bonusList.map(function (elem) {\n    return property[elem.key] && property[elem.key] === 'NON' ? __jsx(Typography, {\n      variant: \"subtitle1\",\n      key: elem.key\n    }, __jsx(Icon, {\n      type: \"elevator\"\n    }), elem.value) : '';\n  }))))), __jsx(Grid, {\n    container: true,\n    className: classes.discoveryContainer\n  }, __jsx(Typography, {\n    variant: \"h2\"\n  }, \"D\\xE9couvrez nos 13 logements neufs disponibles :\"), __jsx(Grid, {\n    container: true\n  }, properties.map(function (elem) {\n    var _property$nb_pieces;\n\n    return __jsx(Grid, {\n      key: elem._id,\n      container: true\n    }, __jsx(Grid, {\n      item: true,\n      md: 2,\n      xs: 5,\n      alignItems: \"center\"\n    }, __jsx(Icon, {\n      type: \"room\",\n      color: \"lightBlue\"\n    }), \" \".concat(property.nb_pieces, \" pi\\xE8ce\").concat(((_property$nb_pieces = property.nb_pieces) === null || _property$nb_pieces === void 0 ? void 0 : _property$nb_pieces.length) > 1 ? 's' : '')), __jsx(Grid, {\n      item: true,\n      md: 3,\n      xs: 5,\n      alignItems: \"center\"\n    }, __jsx(Icon, {\n      type: \"room\",\n      color: \"lightBlue\"\n    }), \" de \".concat(property.surface)), __jsx(Grid, {\n      item: true,\n      md: 3,\n      xs: 5,\n      alignItems: \"center\"\n    }, __jsx(\"span\", null, \"\\xE0 partir de\"), __jsx(\"strong\", null, \" \".concat(property.price, \"\\u20AC\"))), __jsx(Grid, {\n      item: true,\n      md: 3,\n      xs: 5,\n      alignItems: \"center\"\n    }, \"\".concat(property.price, \" logements disponibles\")), __jsx(Grid, {\n      item: true,\n      md: 1,\n      xs: 5,\n      alignItems: \"center\"\n    }, __jsx(Icon, {\n      type: \"plus\",\n      color: \"lightBlue\",\n      size: \"small\"\n    })));\n  })))));\n};\n\nPropertyPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var req, query, headers, property, _yield$getPropertiesA, _yield$getPropertiesA2, properties;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref2.req, query = _ref2.query;\n            headers = {};\n\n            if (req && req.headers && req.headers.cookie) {\n              headers.cookie = req.headers.cookie;\n            }\n\n            _context.next = 5;\n            return getPropertyApiMethod(query.id, {\n              headers: headers\n            });\n\n          case 5:\n            property = _context.sent;\n            _context.next = 8;\n            return getPropertiesApiMethod({\n              headers: headers\n            });\n\n          case 8:\n            _yield$getPropertiesA = _context.sent;\n            _yield$getPropertiesA2 = _yield$getPropertiesA.list;\n            properties = _yield$getPropertiesA2 === void 0 ? [] : _yield$getPropertiesA2;\n            return _context.abrupt(\"return\", {\n              property: property,\n              properties: properties\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default withAuth(PropertyPage);","map":null,"metadata":{},"sourceType":"module"}